# MySQLでいろいろなグラフを書こう！
## はじめに
MySQLの出力結果をグラフにして表示するには手間がかかります。  
GUIツールを使うこともあれば、結果をCSVに出力してエクセルなどで操作することもあるでしょう。  

しかし、我々には標準出力という強い味方がいます。

SSHで接続した時、エクセルを開くのが面倒なとき、  
様々な場合であっても標準出力であれば気軽に結果を確認することができます。

今回は、MySQLの標準出力のみでリッチなグラフを描画する方法について考えていきたいと思います。  
MySQLでグラフをかければ、面倒なエクセル操作とおさらばできます！やったー！

### 環境
あまり難しいことを考えず、HomebrewでインストールしたMySQLを利用します。  
versionについては以下の通りです。

```
$ brew info mysql
mysql: stable 5.7.17 (bottled)
```

## 1. 連番を生成する
レコードの内容に対して、連番を生成するところから始めます。  
グラフとか関係なく、日付順にデータを並べたりする際などに便利です。  

MySQLに制御構文はありませんが、SELECT句によるレコード一件を1回のループとしてみれば、
変数をインクリメントさせることができます。

説明用に以下のようなテーブルを用意しました。
```
mysql> SELECT * FROM random_nums;
+-------+
| num   |
+-------+
|   122 |
| 13123 |
|   189 |
|  1213 |
|     3 |
| 79879 |
|  3169 |
|   791 |
|  9810 |
|   114 |
+-------+
10 rows in set (0.00 sec)
```
連番を生成しつつ、ランダムな整数を小さい順に並べたいと思います。

```
mysql> SET @i = 0;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT
    ->   @i := @i + 1 AS increment,
    ->   num
    -> FROM
    ->   random_nums
    -> ORDER BY
    ->   num
    -> ;
+-----------+-------+
| increment | num   |
+-----------+-------+
|         1 |     3 |
|         2 |   114 |
|         3 |   122 |
|         4 |   189 |
|         5 |   791 |
|         6 |  1213 |
|         7 |  3169 |
|         8 |  9810 |
|         9 | 13123 |
|        10 | 79879 |
+-----------+-------+
10 rows in set (0.00 sec)
```

連番を生成することができました。  
ここで注意しなくてはならないのは、インクリメントの回数の上限はテーブルのレコード数に依存するということです。  
より大きな数でインクリメントを生成した場合は、それ相応の大きさをのテーブルを用意する必要があります。

